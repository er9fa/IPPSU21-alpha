<link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
<script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
<select id="dropdown" class="js-example-basic-single" style="width: 16rem;">
</select>
<script>
    $(document).ready(() => {
        // Initializes the dropdown element as a Select2 element
        $('#dropdown').select2({
            placeholder: 'Select an option'
        })
    })

    // Fixes a bug where the dropdown search bar isn't automatically focused
    $(document).on('select2:open', () => {
        document.querySelector('.select2-search__field').focus();
    })

    // Binds an array of options to the dropdown menu
    // To bind a list of popular coins to the dropdown, call convertPopularCoins to obtain a list of coins in the proper format, and then call this function
    function bindOptionsToDropdown(arrayOfOptions) {
        $("#dropdown").select2({
            data: arrayOfOptions
        })
    }

    // Sets a listener for whenever the user selects an option from the dropdown
    // Passes through the selected option object as a parameter
    function setOnChangeListenerForDropdown(listener) {
        // Bind an event
        $('#dropdown').on('change', () => {
            value = $('.js-example-basic-single').select2('data')[0] // Retrieve the selected option object
            console.log("orig", value)
            listener(value) // Executes the listener and passes through the object as a parameter
        });
    }
</script>
