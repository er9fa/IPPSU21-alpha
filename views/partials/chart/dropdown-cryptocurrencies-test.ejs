<link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
<script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
<select class="js-example-basic-single" style="width: 12rem;">
</select>
<script>
    $(document).ready(() => {
        $('.js-example-basic-single').select2({
            placeholder: 'Select an option'
        })
        // Bind an event
        $('.js-example-basic-single').on('change', () => {
            value = $('.js-example-basic-single').select2('data')[0].text
            const temp = value.split(" ")
            console.log("Temp value:", temp)
            const coinName = temp[1]
            console.log(coinName)
            chart.destroy()
            dataPoints = []
            chartXAxisTickers = []
            mostRecentTimeTicker = []
            clearInterval(intervalID) // TODO: Why is the chart updating with 2 datapoints at a time when selecting a new coin from the dropdown menu?

            const chartTitle = document.getElementById("chart-title")
            chartTitle.textContent = coinName + " Value"
            chart = createChart(coinName, "chart")
        });

        getPopularCoins().then(coins => {
            popularCoinsFormatted = []
            coins.forEach((coin, index) => {
                coinFormatted = {
                    id: index,
                    text: `${coin.tickerSymbol} ${coin.name}`
                }
                popularCoinsFormatted.push(coinFormatted)
            })

            $(".js-example-basic-single").select2({
                data: popularCoinsFormatted
            })
        })

    })
    $(document).on('select2:open', () => {
        document.querySelector('.select2-search__field').focus();
    });
</script>