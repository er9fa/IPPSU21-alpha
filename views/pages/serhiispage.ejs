<!DOCTYPE html>
<html>
<head>

</head>
<body>
  <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>

  <button type="button" onclick="drawChart()">
    Test
  </button>

  <script type="text/javascript">
    google.charts.load('current', {'packages':['corechart']});

    function drawChart() {
      fetch('https://api.coindesk.com/v1/bpi/historical/close.json')
        .then(response => response.json())
        .then(data => {

          var table = [];

          for (let i = 0; i < 30; i++){
            table.push([]);
          }

          for (let i = 0; i < 30; i++){
            var today = new Date();
            today.setDate(today.getDate()-i);
            var dd = String(today.getDate()).padStart(2, '0');
            var mm = String(today.getMonth() + 1).padStart(2, '0'); //January is 0!
            var yyyy = today.getFullYear();
            today = yyyy + "-" + mm + "-" + dd;
            table[i].push(today);
            table[i].push(data["bpi"][today]);
          }

          table = table.reverse();

          table[0][0] = "Date";
          table[0][1] = "";

          console.log(table);

          console.log(data["bpi"]["2021-06-11"]);

          var data = google.visualization.arrayToDataTable(table);

          var options = {
            title: 'BTC price history',
            curveType: 'function',
            legend: { position: 'bottom' }
          };

          var chart = new google.visualization.LineChart(document.getElementById('curve_chart'));

          chart.draw(data, options);
        });
    }
  </script>

  <div id="curve_chart" style="width: 900px; height: 500px"></div>
</body>
</html>
